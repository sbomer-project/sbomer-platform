# sbomer-platform
Helm Chart for the SBOMer Platform

## How to run locally

- First, make sure Tekton is install on the minikube cluster we install this chart on
- Build the dependencies:
```script
helm dependency update ./
```
- Then install the helm chart with devProfile=true to make sure that Kafka and Apicurio get set up in the cluster:
```script
helm install sbomer-release ./ -n sbomer-test --create-namespace
```
- Then once all the pods are running, port-forward the api gateway:
```script
kubectl port-forward svc/sbomer-release-gateway 8080:8080 -n sbomer-test (leave open in terminal)
```
- We can now go into the sbom-service API to trigger a generation:
```script
http://localhost:8080/q/swagger-ui/#/Generation%20Resource/post_api_v1_generations
```

## Optional: OWASP Dependency Track

As a useful platform to upload the SBOMs generated by SBOMer and see vulnerability reports related to them, we can enable an instance of OWASP Dependency Track as an optional helm dependency.

### How to Run It

Because Dependency-Track requires a dedicated API server, frontend, and database, it is disabled by default to save resources during standard local development.

To spin up the platform with Dependency-Track included, we pass the includeDependencyTrack flag during the Helm installation or upgrade. Here is how to run a quick instance of it:

```script
# 1. Ensure dependencies are up to date
helm dependency update ./sbomer-platform-chart

# 2. Install or upgrade the platform with the flag enabled
helm install sbomer-release ./ -n sbomer-test --create-namespace --set global.includeDependencyTrack=true

# 3. Do the same port-forwarding as the above
kubectl port-forward svc/sbomer-release-gateway 8080:8080 -n sbomer-test (leave open in terminal)
```

### Access and Login

Once the pods are up and running, Dependency-Track is exposed via our local Nginx gateway on a dedicated virtual host to prevent routing conflicts.

1. Open the browser and navigate to: http://dtrack.localhost:8080

2. Log in using the default initial credentials:

* Username: `admin`
* Password: `admin`

and follow the prompt to change the admin password.


